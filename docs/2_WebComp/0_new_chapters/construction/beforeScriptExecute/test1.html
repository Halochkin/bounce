<script>
  var res = [];
  window.addEventListener('beforescriptexecute', ({lastParsed}) => res.push(lastParsed.textContent[0]));
  document.addEventListener('readystatechange', function () {
    console.log(res.join(','), res.join(',') === '1,2,3,4,5,6,7');
    console.log(document.readyState, document.readyState === 'interactive');
  }, {once: true});

  const tests = [4, 2];
  customElements.define('web-comp', class WebComp extends HTMLElement {
    constructor() {
      super();
      res.push(tests.pop());
    }
  });
</script>

<script src="beforescriptexecute.js"></script>

<body>
<h3>Test of beforescriptexecute</h3>
<!--1--><web-comp a>
  <!--3--><web-comp b></web-comp>
</web-comp>

<script>5; res.push(6);</script>
</body>
<!--7-->